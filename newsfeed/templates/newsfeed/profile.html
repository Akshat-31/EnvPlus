{% extends 'newsfeed/base.html' %}
{% load static %}

{% block title %}User Profile - NewsHub{% endblock %}

{% block content %}
<div class="profile-page">
    <div class="profile-header">
        <h1>Welcome, {{ user_detail.username }}!</h1>
        <p class="member-since">Member Since: {{ user_detail.created_at|date:"M d, Y" }}</p>
        <p class="bio">{{ user_detail.bio|default:"No bio provided yet." }}</p>
        <p>Email: **{{ user_detail.email }}**</p>
        {% if user_detail.is_admin %}
            <span class="role-badge admin">Administrator</span>
        {% elif user_detail.is_author %}
            <span class="role-badge author">Author</span>
        {% endif %}
    </div>

    <div class="profile-stats">
        <div class="stat-card">
            <h4>Total Likes</h4>
            <p>{{ userLiked|length }}</p>
        </div>
        <div class="stat-card">
            <h4>Total Comments</h4>
            <p>{{ userCommeted|length }}</p>
        </div>
        <div class="stat-card">
            <h4>Saved Articles</h4>
            <p>{{ userSaved|length }}</p>
        </div>
    </div>

    <div class="profile-content-tabs">
        <input type="radio" name="tab" id="tab1" checked>
        <label for="tab1">Saved Articles ({{ userSaved|length }})</label>

        <input type="radio" name="tab" id="tab3">
        <label for="tab3">Login History ({{ userLoginHistory|length }})</label>

        <div class="tab-content" id="content3">
            {% if userLoginHistory %}
                <ul class="login-history-list">
                {% for login in userLoginHistory|slice:":10" %}
                    <li><i class="fas fa-sign-in-alt"></i> Logged in at {{ login.logged_in_at }}</li>
                {% endfor %}
                </ul>
                <p>Showing last logins.</p>
            {% else %}
                <p>No login history recorded.</p>
            {% endif %}
        </div>
        <div class="tab-content" id="content1">
            {% if userSaved %}
                <ul class="login-history-list">
                {% for login in userSaved|slice:":10" %}
                    <li><i class="fas fa-sign-in-alt"></i> Saved article {{ login.article }}</li>
                {% endfor %}
                </ul>
                <p>Showing Saved articles id.</p>
            {% else %}
                <p>No login history recorded.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}